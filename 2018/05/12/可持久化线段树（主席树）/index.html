<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="high-cold">
  <!-- Open Graph Data -->
  <meta property="og:title" content="可持久化线段树（主席树）"/>
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="High-Cold"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://yoursite.com"/>
  
    <link rel="alternate" href="/atom.xml" title="High-Cold" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>High-Cold</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>


<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">

<style>
    .pace .pace-progress {
    	background: #1E92FB; /*进度条颜色*/
    	height: 3px;
    }
    .pace .pace-progress-inner {
     	box-shadow: 0 0 10px #1E92FB, 0 0 5px #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
    	border-top-color: #1E92FB;	/*上边框颜色*/
    	border-left-color: #1E92FB;	/*左边框颜色*/
    }
  </style>
  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-light.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">可持久化线段树（主席树）</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/<your-github-username>">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:<your-email-address>">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By high-cold</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">05/12/18</span>
            <span class="time">09:43:04</span>
          </span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/蒟蒻的板子/">#蒟蒻的板子</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <pre><code>


#include <algorithm> //STL通用算法
#include <cmath> //定义数学函数
#include <cstdio> //定义输入/输出函数
#include <iostream> //数据流输入/输出
#include <cstring> //字符串处理
#include <string> //字符串类
#include <ctime> //定义关于时间的函数
#define itn int
#define fro for
#define ll long long
#define reg register
#define inf 1234567890
/*#include <bitset> //STL位集容器
#include <cstype> //字符处理
#include <cerrno> //定义错误码
#include <complex> //复数类
#include <clocale> //定义本地化函数
#include <cstdlib> //定义杂项函数及内存分配函数
#include <deque> //STL双端队列容器
#include <exception> //异常处理类
#include <fstream> //文件输入/输出
#include <functional> //STL定义运算函数(代替运算符)
#include <limits> //定义各种数据类型最值常量
#include <list> //STL线性列表容器
#include <map> //STL映射容器
#include <iomanip> //参数化输入/输出
#include <ios> //基本输入/输出支持
#include <iosfwd> //输入/输出系统使用的前置声明
#include <istream> //基本输入流
#include <ostream> //基本输出流
#include <queue> //STL队列容器
#include <set> //STL集合容器
#include <sstream> //基于字符串的流
#include <stack> //STL堆栈容器
#include <stdexcept> //标准异常类
#include <streambuf> //底层输入/输出支持
#include <utility> //STL通用模板类
#include <vector> //STL动态数组容器
#include <cwchar.h>//宽字符处理及输入/输出
#include <cwctype.h> //宽字符分类*/

using namespace std;

int ans;

int max(int x,int y){return x>y?x:y;}

int min(int x,int y){return x<y?x:y;} int="" read()="" {="" x="0,f=1;char" ch="getchar();" while="" (ch<'0'="" ||="">'9'){if (ch=='-')f=-1;ch=getchar();}
    while ('0'<=ch &&="" ch<="9" ){x="x*10+(ch^48);ch=getchar();}" return="" x*f;="" }="" void="" write(int="" x)="" {="" int="" buf[50];="" if="" (x<0)="" putchar('-'),x="-x;" buf[0]="0;" while="" (x)="" buf[++buf[0]]="x%10,x/=10;" (!buf[0])="" (buf[0])="" putchar('0'+buf[buf[0]--]);="" struct="" node="" l,r,sum;="" }t[20002000];="" a[500500],b[500500],n,m,id="0,cnt,root[500500];" li(int="" x){return="" lower_bound(a+1,a+cnt+1,x)-a;}="" inline="" build(int="" x,int="" l,int="" r)="" (l="=r)" t[x].l="t[x].r=-1;" t[x].sum="0;" ;="" mid="l+r">>1;
    t[x].l=++id;t[x].r=++id;
    build(t[x].l,l,mid);
    build(t[x].r,mid+1,r);
}

inline int add(int x,int l,int r,int to)
{
    int now=++id;
    t[now].l=t[x].l;t[now].r=t[x].r;t[now].sum=t[x].sum+1;
    if (l<r) {="" int="" mid="l+r">>1;
        if (mid>=to) t[now].l=add(t[x].l,l,mid,to);
        else t[now].r=add(t[x].r,mid+1,r,to);
    }
    return now;
}

inline int query(int u,int v,int l,int r,int k)
{
    if (l==r) return l;
    int x=t[t[v].l].sum-t[t[u].l].sum;
    int mid=l+r>>1;
    if (x<k) return="" query(t[u].r,t[v].r,mid+1,r,k-x);="" else="" query(t[u].l,t[v].l,l,mid,k);="" }="" int="" main(){="" n="read(),m=read();" for="" (register="" i="1;i<=n;i++)" a[i]="b[i]=read();" sort(a+1,a+n+1);="" cnt="unique(a+1,a+n+1)-a-1;" build(++id,1,cnt);="" root[0]="1;" {="" root[i]="add(root[i-1],1,cnt,li(b[i]));" while="" (m--)="" q="read(),w=read(),e=read();" printf("%d\n",a[query(root[q-1],root[w],1,cnt,e)]);="" 0;="" <="" code=""></k)></r)></=ch></y?x:y;}></cwctype.h></cwchar.h></vector></utility></streambuf></stdexcept></stack></sstream></set></queue></ostream></istream></iosfwd></ios></iomanip></map></list></limits></functional></fstream></exception></deque></cstdlib></clocale></complex></cerrno></cstype></bitset></ctime></string></cstring></iostream></cstdio></cmath></algorithm></code></pre>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

